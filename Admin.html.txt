<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Panel - TruePro Investments</title>
    <link rel="stylesheet" href="css/style.css">
    <style>
        .tab-container { margin-top: 2rem; }
        .tabs { display: flex; border-bottom: 2px solid #00d09c; margin-bottom: 2rem; }
        .tab { padding: 1rem 2rem; cursor: pointer; background: #f8f9fa; border: 1px solid #ddd; border-bottom: none; margin-right: 5px; border-radius: 5px 5px 0 0; }
        .tab.active { background: #00d09c; color: white; border-color: #00d09c; }
        .tab-content { display: none; }
        .tab-content.active { display: block; }
        .action-buttons { display: flex; gap: 0.5rem; margin: 0.5rem 0; }
        .btn-small { padding: 0.25rem 0.5rem; font-size: 0.8rem; }
        .btn-success { background: #28a745; color: white; }
        .btn-danger { background: #dc3545; color: white; }
        .btn-warning { background: #ffc107; color: black; }
        .transaction-pending { background: #fff3cd; }
        .transaction-approved { background: #d4edda; }
        .transaction-declined { background: #f8d7da; }
        .payment-method-card { background: white; padding: 1.5rem; border-radius: 10px; margin-bottom: 1rem; box-shadow: 0 2px 5px rgba(0,0,0,0.1); }
        .form-row { display: flex; gap: 1rem; margin-bottom: 1rem; }
        .form-row .form-group { flex: 1; }
        .modal { position: fixed; z-index: 1000; left: 0; top: 0; width: 100%; height: 100%; background-color: rgba(0,0,0,0.5); }
        .modal-content { background-color: white; margin: 5% auto; padding: 2rem; border-radius: 10px; width: 90%; max-width: 600px; position: relative; }
        .close { position: absolute; right: 1rem; top: 1rem; font-size: 1.5rem; cursor: pointer; }
        .method-details { border: 1px solid #ddd; padding: 1rem; border-radius: 5px; margin-top: 1rem; background: #f9f9f9; }
    </style>
</head>
<body>
    <nav class="navbar">
        <div class="nav-container">
            <div class="nav-logo">
                <h2>TruePro Investments Admin</h2>
            </div>
            <div class="nav-menu">
                <a href="index.html">Website</a>
                <a href="admin.html" class="active">Admin Panel</a>
                <a href="#" id="logoutBtn">Logout</a>
            </div>
        </div>
    </nav>

    <section class="admin-section">
        <div class="container">
            <h1>Financial Management Dashboard</h1>
            
            <div class="admin-stats">
                <div class="stat-card">
                    <h3>Total Deposits</h3>
                    <span id="totalDeposits">$0</span>
                </div>
                <div class="stat-card">
                    <h3>Total Withdrawals</h3>
                    <span id="totalWithdrawals">$0</span>
                </div>
                <div class="stat-card">
                    <h3>Pending Deposits</h3>
                    <span id="pendingDeposits">$0</span>
                </div>
                <div class="stat-card">
                    <h3>Pending Withdrawals</h3>
                    <span id="pendingWithdrawals">$0</span>
                </div>
                <div class="stat-card">
                    <h3>Platform Balance</h3>
                    <span id="platformBalance">$0</span>
                </div>
            </div>

            <div class="tab-container">
                <div class="tabs">
                    <div class="tab active" onclick="switchTab('users')">User Management</div>
                    <div class="tab" onclick="switchTab('transactions')">Pending Transactions</div>
                    <div class="tab" onclick="switchTab('payment-methods')">Payment Methods</div>
                    <div class="tab" onclick="switchTab('financial')">Financial Tools</div>
                </div>

                <div id="users-tab" class="tab-content active">
                    <div class="users-table-container">
                        <h2>Registered Users</h2>
                        <table class="users-table">
                            <thead>
                                <tr>
                                    <th>Name</th>
                                    <th>Email</th>
                                    <th>Balance</th>
                                    <th>Account Plan</th>
                                    <th>Status</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody id="usersTableBody"></tbody>
                        </table>
                    </div>
                </div>

                <div id="transactions-tab" class="tab-content">
                    <div class="users-table-container">
                        <h2>Pending Transactions</h2>
                        <table class="users-table">
                            <thead>
                                <tr>
                                    <th>User</th>
                                    <th>Type</th>
                                    <th>Amount</th>
                                    <th>Date</th>
                                    <th>Description</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody id="transactionsTableBody"></tbody>
                        </table>
                    </div>
                </div>

                <div id="payment-methods-tab" class="tab-content">
                    <div class="users-table-container">
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem;">
                            <h2>Payment Methods</h2>
                            <button onclick="showAddPaymentMethod()" class="btn-primary">Add Payment Method</button>
                        </div>
                        <div id="paymentMethodsList"></div>
                    </div>
                </div>

                <div id="financial-tab" class="tab-content">
                    <div class="users-table-container">
                        <h2>Balance Adjustment</h2>
                        <form id="adjustBalanceForm" class="auth-form" style="max-width: 500px;">
                            <div class="form-group">
                                <label for="adjustUser">Select User</label>
                                <select id="adjustUser" name="userId" required>
                                    <option value="">Select User</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="adjustType">Adjustment Type</label>
                                <select id="adjustType" name="type" required>
                                    <option value="add">Add Funds</option>
                                    <option value="deduct">Deduct Funds</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="adjustAmount">Amount ($)</label>
                                <input type="number" id="adjustAmount" name="amount" step="0.01" min="0.01" required>
                            </div>
                            <div class="form-group">
                                <label for="adjustDescription">Description</label>
                                <input type="text" id="adjustDescription" name="description" required>
                            </div>
                            <button type="submit" class="btn-primary">Process Adjustment</button>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <div id="paymentMethodModal" class="modal" style="display: none;">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h2 id="modalTitle">Add Payment Method</h2>
            <form id="paymentMethodForm">
                <input type="hidden" id="methodId">
                <div class="form-group">
                    <label for="methodName">Method Name</label>
                    <input type="text" id="methodName" required>
                </div>
                <div class="form-group">
                    <label for="methodType">Type</label>
                    <select id="methodType" required>
                        <option value="bank">Bank Transfer</option>
                        <option value="crypto">Cryptocurrency</option>
                        <option value="card">Credit/Debit Card</option>
                        <option value="other">Other</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="methodStatus">Status</label>
                    <select id="methodStatus" required>
                        <option value="active">Active</option>
                        <option value="inactive">Inactive</option>
                    </select>
                </div>
                <div id="bankDetails" class="method-details">
                    <div class="form-group">
                        <label for="bankName">Bank Name</label>
                        <input type="text" id="bankName">
                    </div>
                    <div class="form-group">
                        <label for="accountName">Account Name</label>
                        <input type="text" id="accountName">
                    </div>
                    <div class="form-group">
                        <label for="accountNumber">Account Number</label>
                        <input type="text" id="accountNumber">
                    </div>
                    <div class="form-group">
                        <label for="routingNumber">Routing Number</label>
                        <input type="text" id="routingNumber">
                    </div>
                    <div class="form-group">
                        <label for="swiftCode">SWIFT Code</label>
                        <input type="text" id="swiftCode">
                    </div>
                </div>
                <div id="cryptoDetails" class="method-details" style="display: none;">
                    <div class="form-group">
                        <label for="walletAddress">Wallet Address</label>
                        <input type="text" id="walletAddress">
                    </div>
                    <div class="form-group">
                        <label for="network">Network</label>
                        <input type="text" id="network">
                    </div>
                </div>
                <button type="submit" class="btn-primary">Save Payment Method</button>
            </form>
        </div>
    </div>

    <script src="js/auth.js"></script>
    <script src="js/admin.js"></script>
    <script src="js/smartsupp.js"></script>
    
    <footer>
        <div class="container">
            <p>&copy; 2024 TruePro Investments. Admin Panel</p>
        </div>
    </footer>
</body>
</html>